<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เปอร์เซ็นต์เกมส์พรีเมียม</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-black: #0A0A0A;
            --color-dark-card: #141414;
            --color-gold: #FFD700;
            --color-red-hot: #e74c3c;
            --color-text: #EAEAEA;
            --glow-color-pulse: rgba(255, 215, 0, 0.25);
            --glow-color-hover: rgba(255, 215, 0, 0.6);
            --glow-color-hot: rgba(255, 223, 107, 0.8);
            
            --bar-color-hot: linear-gradient(90deg, #ff8c00, #ffd700);
            --bar-color-medium: linear-gradient(90deg, #E4A11B, #FFD700);
            --bar-color-cool: linear-gradient(90deg, #CACACA, #F0E68C);
        }

        @keyframes hot-shake {
            0%, 100% { transform: translate(0, 0) rotate(0); }
            25% { transform: translate(1px, -1px) rotate(1deg); }
            75% { transform: translate(-1px, 1px) rotate(-1deg); }
        }

        body {
            background-color: var(--color-black);
            color: var(--color-text);
            font-family: 'Sarabun', sans-serif;
            margin: 0;
            padding: 1rem 0.75rem;
        }
        .container { width: 100%; max-width: 600px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 1.5rem; }
        .main-title { font-size: 1.8rem; font-weight: 700; color: var(--color-gold); text-shadow: 0 0 10px var(--glow-color-pulse), 0 0 15px var(--glow-color-pulse); }
        .realtime-clock { font-size: 0.9rem; background: rgba(20, 20, 20, 0.7); backdrop-filter: blur(8px); padding: 8px 16px; border-radius: 50px; display: inline-flex; align-items: center; gap: 8px; margin-top: 1rem; border: 1px solid rgba(255, 215, 0, 0.2); }
        
        .game-grid { 
            display: grid; 
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }
        .game-card-link { text-decoration: none; color: inherit; display: block; }
        
        .game-card {
            background: var(--color-dark-card);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 12px;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.5s ease, border-color 0.5s ease;
        }

        .game-card.is-updating { border-color: var(--color-gold); box-shadow: 0 0 25px var(--glow-color-hot); transform: scale(1.01); }
        .game-card.is-shaking { animation: hot-shake 0.5s linear infinite; }
        .game-card-link:hover .game-card:not(.is-updating) { transform: translateY(-3px); box-shadow: 0 0 20px var(--glow-color-hover); }
        
        .game-image { 
            width: 80px;
            height: 80px;
            object-fit: cover; 
            border-radius: 8px; 
            flex-shrink: 0;
        }
        
        .game-info {
            flex-grow: 1;
            text-align: left;
        }

        .percentage-bar-container { width: 100%; height: 6px; background-color: #2a2a2a; border-radius: 10px; margin: 6px 0; overflow: hidden; border: 1px solid #333; }
        .percentage-bar-fill { height: 100%; width: 0%; background: var(--bar-color-medium); border-radius: 10px; transition: width 1s ease-out, background 1s ease-in-out; }
        .last-updated-text { font-size: 0.7rem; color: #888; height: 1em; }

        .game-title { font-size: 1rem; font-weight: 700; margin: 0 0 4px 0; }
        .game-percentage { font-size: 1.4rem; font-weight: 700; color: var(--color-gold); }
        
        .top-game-badge {
            position: absolute;
            top: 6px; 
            left: 6px;
            background: linear-gradient(45deg, #c0392b, #e74c3c);
            color: white;
            padding: 3px 7px;
            border-radius: 5px;
            font-size: 0.7rem;
            font-weight: 700;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            opacity: 0;
            transform: scale(0.8) translateY(-10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            z-index: 2;
        }
        .top-game-badge svg { width: 1em; height: 1em; }
        
        .is-hot-game .top-game-badge { 
            opacity: 1;
            transform: scale(1) translateY(0);
        }

    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">เปอร์เซ็นต์เกมส์แตกสูงสุด</h1>
            <div class="realtime-clock">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/></svg>
                <span id="clock-text"></span>
            </div>
        </header>

        <main>
            <div id="game-grid" class="game-grid">
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/L6tx6WMq/image.jpg" class="game-image" alt="Fortune Tiger"><div class="game-info"><h2 class="game-title">Fortune Tiger</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/8cHTTHpq/image.jpg" class="game-image" alt="Lucky Neko"><div class="game-info"><h2 class="game-title">Lucky Neko</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/Zq5HHPDV/2.jpg" class="game-image" alt="Mahjong Ways 2"><div class="game-info"><h2 class="game-title">Mahjong Ways 2</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/cCyfpfXq/image.jpg" class="game-image" alt="Treasures of Aztec"><div class="game-info"><h2 class="game-title">Treasures of Aztec</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/SswGmBQv/image.jpg" class="game-image" alt="Ways of the Qilin"><div class="game-info"><h2 class="game-title">Ways of the Qilin</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
                <a href="#" class="game-card-link"><article class="game-card" data-last-updated=""><div class="top-game-badge"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.31.75 1 2 1 4 0 .5-.5 1-1 1H4c0 .5.5 1 1 1 .5 0 1 .5 1 1H5c0 .5.5 1 1 1s1 .5 1 1H6c.55 0 1 .5 1 1s.5 1 1 1h.5c.55 0 1 .5 1 1zM.5 12C.5 13.5 1.5 15 3 15h1c.5 0 .5-1 .5-1H3c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3.5c-.5 0-.5-.5-.5-.5s.5-.5 1-.5h1a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H4a1 1 0 0 1-1-1c0-.5.5-1 1-1h.5a.5.5 0 0 0 .5-.5c0-.5-.5-1-1-1H3a2 2 0 0 0-2 2c0 1.5.5 3.5 2.5 5.5Z"/></svg> HOT</div><img src="https://i.postimg.cc/XNdfwDYn/image.jpg" class="game-image" alt="Wild Ape"><div class="game-info"><h2 class="game-title">Wild Ape</h2><div class="percentage-bar-container"><div class="percentage-bar-fill"></div></div><p class="game-percentage">0.00%</p><p class="last-updated-text"></p></div></article></a>
            </div>
        </main>
    </div>

    <script>
        const MIN_PERCENT = 89;
        const MAX_PERCENT = 97.5; // เพิ่มโอกาสให้ถึง 96+
        const allGameCards = document.querySelectorAll('.game-card');
        
        // --- ส่วน JavaScript ที่แก้ไขทั้งหมด ---

        function randomInRange(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function updateClock() {
            const clockEl = document.getElementById('clock-text');
            if (clockEl) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                clockEl.textContent = `อัปเดต: ${now.toLocaleDateString('th-TH', { day: '2-digit', month: '2-digit', year: 'numeric' })} ${timeString}`;
            }
        }

        function animateValue(element, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                element.textContent = `${(progress * (end - start) + start).toFixed(2)}%`;
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        function updateCard(card, isInitialization = false) {
            const percentEl = card.querySelector('.game-percentage');
            const barEl = card.querySelector('.percentage-bar-fill');
            const oldPercent = isInitialization ? MIN_PERCENT : (parseFloat(percentEl.textContent) || MIN_PERCENT);
            const newPercent = parseFloat((Math.random() * (MAX_PERCENT - MIN_PERCENT) + MIN_PERCENT).toFixed(2));
            
            animateValue(percentEl, oldPercent, newPercent, 800);
            barEl.style.width = `${newPercent}%`;
            card.dataset.lastUpdated = Date.now();
            
            card.classList.remove('is-shaking');
            if (newPercent >= 95) {
                barEl.style.background = 'var(--bar-color-hot)';
                card.classList.add('is-shaking');
            } else if (newPercent >= 92) {
                barEl.style.background = 'var(--bar-color-medium)';
            } else {
                barEl.style.background = 'var(--bar-color-cool)';
            }
        }
        
        // ✅ [แก้ไข] ฟังก์ชันสำหรับตรวจสอบและแสดงป้าย HOT
        function updateHotBadges() {
            allGameCards.forEach(card => {
                const currentPercent = parseFloat(card.querySelector('.game-percentage').textContent);
                // ถ้าเปอร์เซ็นต์มากกว่าหรือเท่ากับ 96 ให้แสดงป้าย HOT
                if (currentPercent >= 96) {
                    card.classList.add('is-hot-game');
                } else {
                    card.classList.remove('is-hot-game');
                }
            });
        }
        
        function updateTimestamps() {
            allGameCards.forEach(card => {
                const timestampEl = card.querySelector('.last-updated-text');
                const lastUpdated = parseInt(card.dataset.lastUpdated);
                if (lastUpdated) {
                    const secondsAgo = Math.round((Date.now() - lastUpdated) / 1000);
                    if (secondsAgo < 60) {
                        timestampEl.textContent = 'อัปเดตเมื่อสักครู่';
                    } else {
                        const minutesAgo = Math.floor(secondsAgo / 60);
                        timestampEl.textContent = `อัปเดตเมื่อ ${minutesAgo} นาทีที่แล้ว`;
                    }
                }
            });
        }

        // ✅ [แก้ไข] ฟังก์ชันหลักสำหรับอัปเดตเกมแบบสุ่มและต่อเนื่อง
        function scheduleNextGameUpdate() {
            // 1. สุ่มเวลาในการอัปเดตครั้งถัดไป (5-10 วินาที)
            const nextUpdateIn = randomInRange(5000, 10000);

            setTimeout(() => {
                // 2. สุ่มเลือกเกม 1 เกมที่จะอัปเดต
                const randomIndex = randomInRange(0, allGameCards.length - 1);
                const cardToUpdate = allGameCards[randomIndex];

                // 3. แสดงเอฟเฟกต์และอัปเดตข้อมูล
                cardToUpdate.classList.add('is-updating');
                updateCard(cardToUpdate);

                // 4. ตรวจสอบป้าย HOT ใหม่หลังจากอัปเดตเสร็จ
                setTimeout(() => {
                    updateHotBadges();
                    cardToUpdate.classList.remove('is-updating');
                }, 1000); // รอ 1 วินาทีเพื่อให้ animation แสดงผล

                // 5. เรียกตัวเองเพื่อทำงานในรอบถัดไป
                scheduleNextGameUpdate();
            }, nextUpdateIn);
        }

        function initializePage() {
            allGameCards.forEach(card => updateCard(card, true));
            updateClock();
            updateTimestamps();
            updateHotBadges(); // ตรวจสอบสถานะ HOT ครั้งแรก
            scheduleNextGameUpdate(); // เริ่มต้นการอัปเดตแบบสุ่ม
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializePage();
            // ไม่ใช้ setInterval ตัวเก่าแล้ว
            setInterval(updateClock, 1000);
            setInterval(updateTimestamps, 5000);
        });
    </script>
</body>
</html>
